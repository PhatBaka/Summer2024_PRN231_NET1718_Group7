@page
@model JewelryStoreUI.Pages.Gems.DetailModel
@{
}

<section id="center" class="center_shop">
    <div class="container">
        <div class="row">
            <div class="center_shop_t clearfix">
                <div class="col-sm-6">

                </div>
                <div class="col-sm-6">
                    <div class="center_shop_tr text-right clearfix">
                        <h6 class="col_2">You are here: <a asp-asp-page="Gems/Index">Home</a> / Gem</h6>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<form method="post" enctype="multipart/form-data">
    <section id="checkout" class="clearfix">
        <div class="container">
            <div class="row">
                <div class="checkout_1 clearfix">
                    <div class="col-sm-8">
                        <div class="checkout_1l1 clearfix">
                            <div class="col-sm-8 space_left">
                                <h5>Gem name <span class="col_1">*</span></h5>
                                <input asp-for="@Model.Gem.Name" class="form-control" type="text">
                            </div>
                            <div class="col-sm-2 space_left">
                                <h5>Sell price <span class="col_1">*</span></h5>
                                <input asp-for="@Model.Gem.SellPrice" class="form-control" type="number">
                            </div>
                            <div class="col-sm-2 space_left">
                                <h5>Weight <span class="col_1">*</span></h5>
                                <input asp-for="@Model.Gem.Weight" class="form-control" type="number">
                            </div>
                        </div>
                        <div class="checkout_1l1 clearfix">
                            <div class="col-sm-3 space_left">
                                <h5>Color <span class="col_1">*</span></h5>
                                <input asp-for="@Model.Gem.Color" class="form-control" type="text">
                            </div>
                            <div class="col-sm-3 space_left">
                                <h5>Sharp <span class="col_1">*</span></h5>
                                <input asp-for="@Model.Gem.Sharp" class="form-control" type="text">
                            </div>
                            <div class="col-sm-3 space_left">
                                <h5>Purity <span class="col_1">*</span></h5>
                                <input asp-for="@Model.Gem.Purity" class="form-control" type="text">
                            </div>
                            <div class="col-sm-3 space_left">
                                <h5>Clarity <span class="col_1">*</span></h5>
                                <select asp-for="@Model.Gem.Clarity" class="form-control" asp-items="Model.ClarityOptions"></select>
                            </div>
                        </div>
                        <div class="checkout_1l1 clearfix">
                            <div class="col-sm-12 space_left">
                                <h5>Description</h5>
                                <textarea asp-for="@Model.Gem.Description" class="form-control" type="text" style="height:350px"></textarea>
                                <h4 class="mgt"><input class="button" type="submit" value="CREATE" /></h4>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="checkout_1l1 clearfix">
                            <h5>Gem image <span class="col_1">*</span></h5>
                            <div class="mt-3">
                                <img src="data:image/jpeg;base64,@Convert.ToBase64String(Model.Gem.MaterialImageData)" />
                            </div>
                            <h5>Certificate image <span class="col_1">*</span></h5>
                            <div class="mt-3">
                                <img src="data:image/jpeg;base64,@Convert.ToBase64String(Model.Gem.CertificateImageData)" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</form>

<script>
    // Function to handle file input change and show preview
    function handleFileSelect(inputId, previewContainerId) {
        const input = document.getElementById(inputId);
        const previewContainer = document.getElementById(previewContainerId);

        input.addEventListener('change', function () {
            while (previewContainer.firstChild) {
                previewContainer.removeChild(previewContainer.firstChild);
            }

            const file = input.files[0];
            const reader = new FileReader();

            reader.onload = function (e) {
                const imgElement = document.createElement('img');
                imgElement.setAttribute('src', e.target.result);
                imgElement.setAttribute('class', 'img-thumbnail');
                previewContainer.appendChild(imgElement);
            }

            reader.readAsDataURL(file);
        });
    }

    // Call handleFileSelect for each file input
    document.addEventListener('DOMContentLoaded', function () {
        handleFileSelect('materialImageInput', 'materialImagePreviewContainer');
        handleFileSelect('gemCertificateInput', 'gemCertificatePreviewContainer');
    });
</script>